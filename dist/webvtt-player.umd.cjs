(function(v,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],m):(v=typeof globalThis<"u"?globalThis:v||self,m(v.webvttPlayer={},v.React))})(this,function(v,m){"use strict";var N={exports:{}},y={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I;function Z(){if(I)return y;I=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(l,o,a){var h=null;if(a!==void 0&&(h=""+a),o.key!==void 0&&(h=""+o.key),"key"in o){a={};for(var p in o)p!=="key"&&(a[p]=o[p])}else a=o;return o=a.ref,{$$typeof:t,type:l,key:h,ref:o!==void 0?o:null,props:a}}return y.Fragment=i,y.jsx=r,y.jsxs=r,y}var S={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D;function q(){return D||(D=1,process.env.NODE_ENV!=="production"&&function(){function t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case u:return"Fragment";case g:return"Profiler";case A:return"StrictMode";case ue:return"Suspense";case de:return"SuspenseList";case me:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case O:return"Portal";case ie:return(e.displayName||"Context")+".Provider";case ce:return(e._context.displayName||"Context")+".Consumer";case le:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return s=e.displayName||null,s!==null?s:t(e.type)||"Memo";case $:s=e._payload,e=e._init;try{return t(e(s))}catch{}}return null}function i(e){return""+e}function r(e){try{i(e);var s=!1}catch{s=!0}if(s){s=console;var c=s.error,d=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return c.call(s,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",d),i(e)}}function l(e){if(e===u)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===$)return"<...>";try{var s=t(e);return s?"<"+s+">":"<...>"}catch{return"<...>"}}function o(){var e=P.A;return e===null?null:e.getOwner()}function a(){return Error("react-stack-top-frame")}function h(e){if(G.call(e,"key")){var s=Object.getOwnPropertyDescriptor(e,"key").get;if(s&&s.isReactWarning)return!1}return e.key!==void 0}function p(e,s){function c(){V||(V=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",s))}c.isReactWarning=!0,Object.defineProperty(e,"key",{get:c,configurable:!0})}function k(){var e=t(this.type);return X[e]||(X[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function T(e,s,c,d,x,j,L,M){return c=j.ref,e={$$typeof:w,type:e,key:s,props:j,_owner:x},(c!==void 0?c:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:k}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:L}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:M}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function _(e,s,c,d,x,j,L,M){var f=s.children;if(f!==void 0)if(d)if(he(f)){for(d=0;d<f.length;d++)b(f[d]);Object.freeze&&Object.freeze(f)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else b(f);if(G.call(s,"key")){f=t(e);var R=Object.keys(s).filter(function(ve){return ve!=="key"});d=0<R.length?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}",B[f+d]||(R=0<R.length?"{"+R.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,d,f,R,f),B[f+d]=!0)}if(f=null,c!==void 0&&(r(c),f=""+c),h(s)&&(r(s.key),f=""+s.key),"key"in s){c={};for(var Y in s)Y!=="key"&&(c[Y]=s[Y])}else c=s;return f&&p(c,typeof e=="function"?e.displayName||e.name||"Unknown":e),T(e,f,j,x,o(),c,L,M)}function b(e){typeof e=="object"&&e!==null&&e.$$typeof===w&&e._store&&(e._store.validated=1)}var E=m,w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),pe=Symbol.for("react.client.reference"),P=E.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=Object.prototype.hasOwnProperty,he=Array.isArray,C=console.createTask?console.createTask:function(){return null};E={"react-stack-bottom-frame":function(e){return e()}};var V,X={},H=E["react-stack-bottom-frame"].bind(E,a)(),Q=C(l(a)),B={};S.Fragment=u,S.jsx=function(e,s,c,d,x){var j=1e4>P.recentlyCreatedOwnerStacks++;return _(e,s,c,!1,d,x,j?Error("react-stack-top-frame"):H,j?C(l(e)):Q)},S.jsxs=function(e,s,c,d,x){var j=1e4>P.recentlyCreatedOwnerStacks++;return _(e,s,c,!0,d,x,j?Error("react-stack-top-frame"):H,j?C(l(e)):Q)}}()),S}var F;function K(){return F||(F=1,process.env.NODE_ENV==="production"?N.exports=Z():N.exports=q()),N.exports}var n=K();function ee({cue:t,seek:i,query:r}){const[l,o]=m.useState(!1);m.useEffect(()=>{t.onenter=()=>o(!0),t.onexit=()=>o(!1)},[t]);let a="";return r&&t.text.match(new RegExp(r,"i"))?a="match":l&&(a="active"),n.jsxs("div",{className:`${a} line`,onClick:()=>i(t.startTime),children:[n.jsxs("div",{className:"time",children:["[",te(t.startTime)," - ",re(t.endTime),"]"]}),n.jsx("div",{className:`${a} text`,dangerouslySetInnerHTML:{__html:t.text}})]})}function te(t){return W(t)}function re(t){return W(t)}function W(t){const i=Math.floor(t/60),r=Math.floor(t%60);return`${String(i).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function U({track:t,seek:i,query:r}){const l=[];if(t&&t.cues)for(let o=0;o<t.cues.length;o++)l.push(n.jsx(ee,{cue:t.cues[o],seek:i,query:r},`line-${o}`));return n.jsx("div",{className:"track",children:l})}function ne({cue:t,seek:i}){const r=JSON.parse(t.text),l=r.title_alt?n.jsx("h3",{className:"titleAlt",children:r.title_alt}):"",o=r.synopsis?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Synopsis"}),r.synopsis]}):"",a=r.synopsis_alt?n.jsx("div",{children:r.synopsis_alt}):"",h=r.keywords?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Keywords: "}),r.keywords]}):"",p=r.keywords_alt?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Alternative Keywords: "}),r.keywords_alt]}):"",k=r.subjects?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Subjects: "}),r.subjects]}):"",T=r.subjects_alt?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Alternative Subjects: "}),r.subjects_alt]}):"",_=r.gpspoints.gps?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Geo: "}),n.jsx("a",{href:`https://www.google.com/maps/@?api=1&map_action=map&center=${r.gpspoints.gps}&zoom=${r.gpspoints.gps_zoom}`,children:r.gpspoints.gps_text})]}):"",b=r.hyperlinks.hyperlink_text?n.jsxs("div",{className:"field",children:[n.jsx("span",{children:"Links: "}),n.jsx("a",{href:r.hyperlinks.hyperlink,children:r.hyperlinks.hyperlink_text})]}):"";return n.jsxs("div",{className:"point",children:[n.jsxs("div",{className:"time",onClick:()=>i(t.startTime),children:["[",se(t.startTime),"]"]}),n.jsxs("div",{className:"text",children:[n.jsx("h2",{className:"title",onClick:()=>i(t.startTime),children:r.title}),l,o,a,h,p,k,T,_,b]})]})}function se(t){return ae(t)}function ae(t){const i=Math.floor(t/60),r=Math.floor(t%60);return`${String(i).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function z({track:t,seek:i}){const r=[];if(t&&t.cues)for(let l=0;l<t.cues.length;l++)r.push(n.jsx(ne,{cue:t.cues[l],seek:i},`point-${l}`));return n.jsx("div",{className:"track",children:r})}const J=({query:t,updateQuery:i})=>n.jsx("div",{className:"search",children:n.jsxs("div",{className:"container",children:[n.jsx("span",{className:"icon",children:"ðŸ”"}),n.jsx("input",{value:t,onChange:r=>i(r.target.value)})]})});function oe(t){const[i,r]=m.useState(!1),[l,o]=m.useState(""),a=m.useRef(null),h=m.useRef(null),p=m.useRef(null);m.useEffect(()=>{const u=a.current;function A(){const g=a.current&&a.current.track;g&&g.cues&&g.cues.length>0&&r(!0)}return u&&u.addEventListener("load",A),k(),()=>{u&&u.removeEventListener("load",A)}},[]);function k(){const u=a.current&&a.current.track;u&&u.cues&&u.cues.length>0&&r(!0)}function T(u){p.current&&(p.current.currentTime=u,p.current.play())}function _(u){o(u)}let b=null,E=null;i&&(b=a.current&&a.current.track,E=h.current&&h.current.track);const w=t.preload?"true":"false",O=t.metadata?n.jsx(z,{seek:T,track:E??void 0}):"";return n.jsx("div",{className:"webvtt-player",children:n.jsxs("div",{className:"media",children:[n.jsx("div",{className:"player",children:n.jsxs("audio",{controls:!0,crossOrigin:"anonymous",onLoadedData:k,preload:w,ref:p,children:[n.jsx("source",{src:t.audio}),n.jsx("track",{default:!0,kind:"subtitles",src:t.transcript,ref:a}),n.jsx("track",{default:!0,kind:"metadata",src:t.metadata,ref:h})]})}),n.jsxs("div",{className:"tracks",children:[n.jsx(U,{seek:T,track:b??void 0,query:l}),O]}),n.jsx(J,{query:l,updateQuery:_})]})})}v.Metadata=z,v.Player=oe,v.Search=J,v.Transcript=U,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});
