!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("webvttPlayer",["React"],t):"object"==typeof exports?exports.webvttPlayer=t(require("react")):e.webvttPlayer=t(e.React)}(this,e=>(()=>{var t={156:t=>{"use strict";t.exports=e},556:(e,t,r)=>{e.exports=r(694)()},694:(e,t,r)=>{"use strict";var n=r(925);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,c){if(c!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o),n.d(o,{Player:()=>G,default:()=>J});var e=n(156),t=n.n(e),r=n(556),i=n.n(r);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=function(e,t,r){return t=l(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r))}(this,r,[e])).state={isActive:!1},t.props.cue.onenter=t.onEnter.bind(t),t.props.cue.onexit=t.onExit.bind(t),t.onClick=t.onClick.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(r,e),n=r,o=[{key:"render",value:function(){var e="";return this.props.query&&this.props.cue.text.match(new RegExp(this.props.query,"i"))?e="match":this.state.isActive&&(e="active"),t().createElement("div",{className:"".concat(e," line"),onClick:this.onClick},t().createElement("div",{className:"time"},"[",this.startTime()," - ",this.endTime(),"]"),t().createElement("div",{className:"".concat(e," text"),dangerouslySetInnerHTML:{__html:this.props.cue.text}}))}},{key:"onEnter",value:function(){this.setState({isActive:!0})}},{key:"onExit",value:function(){this.setState({isActive:!1})}},{key:"onClick",value:function(){this.props.seek(this.props.cue.startTime)}},{key:"startTime",value:function(){return this.formatSeconds(this.props.cue.startTime)}},{key:"endTime",value:function(){return this.formatSeconds(this.props.cue.endTime)}},{key:"formatSeconds",value:function(e){var t=Math.floor(e/60);t<10&&(t="0".concat(t));var r=Math.floor(e%60);return r<10&&(r="0".concat(r)),"".concat(t,":").concat(r)}}],o&&a(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(t().Component);f.propTypes={cue:i().object,seek:i().func,query:i().string};const y=f;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var O=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,r){return t=h(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}(this,r,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(r,e),n=r,(o=[{key:"render",value:function(){var e=[];if(this.props.track&&this.props.track.cues)for(var r=0;r<this.props.track.cues.length;r++)e.push(t().createElement(y,{key:"line-".concat(r),cue:this.props.track.cues[r],active:!1,seek:this.props.seek,query:this.props.query}));return t().createElement("div",{className:"track"},e)}}])&&m(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(t().Component);O.propTypes={track:i().object,url:i().string,seek:i().func,query:i().string};const w=O;function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var T=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=function(e,t,r){return t=P(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}(this,r,[e])).onClick=t.onClick.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(r,e),n=r,o=[{key:"render",value:function(){var e=JSON.parse(this.props.cue.text),r=e.title_alt?t().createElement("h3",{className:"titleAlt"},e.title_alt):"",n=e.synopsis?t().createElement("div",{className:"field"},t().createElement("span",null,"Synopsis"),e.synopsis):"",o=e.synopsis_alt?t().createElement("div",null,e.synopsis_alt):"",i=e.keywords?t().createElement("div",{className:"field"},t().createElement("span",null,"Keywords: "),e.keywords):"",c=e.keywords_alt?t().createElement("div",{className:"field"},t().createElement("span",null,"Alternative Keywords: "),e.keywords_alt):"",a=e.subjects?t().createElement("div",{className:"field"},t().createElement("span",null,"Subjects: "),e.subjects):"",u=e.subjects_alt?t().createElement("div",{className:"field"},t().createElement("span",null,"Alternative Subjects: "),e.subjects_alt):"",s=e.gpspoints.gps?t().createElement("div",{className:"field"},t().createElement("span",null,"Geo: "),t().createElement("a",{href:"https://www.google.com/maps/@?api=1&map_action=map&center=".concat(e.gpspoints.gps,"&zoom=").concat(e.gpspoints.gps_zoom)},e.gpspoints.gps_text)):"",l=e.hyperlinks.hyperlink_text?t().createElement("div",{className:"field"},t().createElement("span",null,"Links: "),t().createElement("a",{href:e.hyperlinks.hyperlink},e.hyperlinks.hyperlink_text)):"";return t().createElement("div",{className:"point"},t().createElement("div",{className:"time",onClick:this.onClick},"[",this.startTime(),"]"),t().createElement("div",{className:"text"},t().createElement("h2",{className:"title",onClick:this.onClick},e.title),r,n,o,i,c,a,u,s,l))}},{key:"onClick",value:function(){this.props.seek(this.props.cue.startTime)}},{key:"startTime",value:function(){return this.formatSeconds(this.props.cue.startTime)}},{key:"formatSeconds",value:function(e){var t=Math.floor(e/60);t<10&&(t="0".concat(t));var r=Math.floor(e%60);return r<10&&(r="0".concat(r)),"".concat(t,":").concat(r)}}],o&&E(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(t().Component);T.propTypes={cue:i().object,seek:i().func};const x=T;function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}var D=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t,r){return t=L(t),function(e,t){if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,r||[],L(e).constructor):t.apply(e,r))}(this,r,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(r,e),n=r,(o=[{key:"render",value:function(){var e=[];if(this.props.track&&this.props.track.cues)for(var r=0;r<this.props.track.cues.length;r++)e.push(t().createElement(x,{key:"point-".concat(r),cue:this.props.track.cues[r],active:!1,seek:this.props.seek}));return t().createElement("div",{className:"track"},e)}}])&&N(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(t().Component);D.propTypes={track:i().object,url:i().string,seek:i().func};const M=D;var A=function(e){var r=e.query,n=e.updateQuery;return t().createElement("div",{className:"search"},t().createElement("div",{className:"container"},t().createElement("span",{className:"icon"},"🔍"),t().createElement("input",{value:r,onChange:function(e){return n(e.target.value)}})))};A.propTypes={query:i().string,updateQuery:i().function};const Q=A;function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(z=function(){return!!e})()}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}var F=function(e){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=function(e,t,r){return t=H(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,z()?Reflect.construct(t,r||[],H(e).constructor):t.apply(e,r))}(this,r)).state={loaded:!1,currentTime:0,query:""},e.track=t().createRef(),e.metatrack=t().createRef(),e.audio=t().createRef(),e.onLoaded=e.onLoaded.bind(e),e.seek=e.seek.bind(e),e.onTrackLoaded=e.onTrackLoaded.bind(e),e.updateQuery=e.updateQuery.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(r,e),n=r,(o=[{key:"componentDidMount",value:function(){this.track.current&&this.track.current.addEventListener("load",this.onTrackLoaded),this.onLoaded()}},{key:"componentWillUnmount",value:function(){this.track.current&&this.track.current.removeEventListener("load",this.onTrackLoaded)}},{key:"render",value:function(){var e=null,r=null;this.state.loaded&&(e=this.track.current.track,r=this.metatrack.current.track);var n=this.props.preload?"true":"false",o=this.props.metadata?t().createElement(M,{url:this.props.metadata,seek:this.seek,track:r}):"";return t().createElement("div",{className:"webvtt-player"},t().createElement("div",{className:"media"},t().createElement("div",{className:"player"},t().createElement("audio",{controls:!0,crossOrigin:"anonymous",onLoadedData:this.onLoaded,preload:n,ref:this.audio},t().createElement("source",{src:this.props.audio}),t().createElement("track",{default:!0,kind:"subtitles",src:this.props.transcript,ref:this.track}),t().createElement("track",{default:!0,kind:"metadata",src:this.props.metadata,ref:this.metatrack}))),t().createElement("div",{className:"tracks"},t().createElement(w,{url:this.props.transcript,seek:this.seek,track:e,query:this.state.query}),o),t().createElement(Q,{query:this.state.query,updateQuery:this.updateQuery})))}},{key:"onLoaded",value:function(){var e=this.track.current&&this.track.current.track;e&&e.cues&&e.cues.length>0&&this.setState({loaded:!0})}},{key:"onTrackLoaded",value:function(){var e=this.track.current&&this.track.current.track;e&&e.cues&&e.cues.length>0&&this.setState({loaded:!0})}},{key:"seek",value:function(e){this.audio.current.currentTime=e,this.audio.current.play()}},{key:"updateQuery",value:function(e){this.setState({query:e})}}])&&W(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(t().Component);F.propTypes={audio:i().string,transcript:i().string,metadata:i().string,preload:i().bool,query:i().string};const G=F,J=F})(),o})());